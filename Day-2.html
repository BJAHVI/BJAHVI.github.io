<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="BHV" />

<meta name="date" content="2023-08-22" />

<title>Day 2</title>

<script src="site_libs/header-attrs-2.24/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/darkly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.0/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.0/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Bjarke</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="about.html">
    <span class="fa fa-image"></span>
     
    About
  </a>
</li>
<li>
  <a href="Day-2.html">
    <span class="fa fa-pen-to-square"></span>
     
    Day 2
  </a>
</li>
<li>
  <a href="Day-3.html">
    <span class="fa fa-pen-to-square"></span>
     
    Day 3
  </a>
</li>
<li>
  <a href="Day-4.html">
    <span class="fa fa-pen-to-square"></span>
     
    Day 4
  </a>
</li>
<li>
  <a href="Day-5.html">
    <span class="fa fa-pen-to-square"></span>
     
    Day 5
  </a>
</li>
<li>
  <a href="cv.html">
    <span class="fa fa-file-pdf-o"></span>
     
    CV
  </a>
</li>
<li>
  <a href="https://BJAHVI.github.io/blog/">
    <span class="fa fa-rss"></span>
     
    Blog
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="mailto:PleaseNo">
    <span class="fa fa-envelope-o"></span>
     
    Contact me
  </a>
</li>
<li>
  <a href="https://github.com/BJAHVI">
    <span class="fa fa-github"></span>
     
    GitHub
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Day 2</h1>
<h4 class="author">BHV</h4>
<h4 class="date">2023-08-22</h4>

</div>

<div id="TOC">
<ul>
<li><a href="#nonsense" id="toc-nonsense">Nonsense</a>
<ul>
<li><a href="#exercises-pt.-1" id="toc-exercises-pt.-1">Exercises
pt. 1</a></li>
<li><a href="#exercises-pt.-2" id="toc-exercises-pt.-2">Exercises
pt. 2</a></li>
<li><a href="#exercises-pt.-3" id="toc-exercises-pt.-3">Exercises
pt. 3</a></li>
</ul></li>
<li><a href="#nyc-flights" id="toc-nyc-flights">NYC flights</a>
<ul>
<li><a href="#exercises-pt.-4" id="toc-exercises-pt.-4">Exercises
pt. 4</a></li>
<li><a href="#exercises-pt.-5" id="toc-exercises-pt.-5">Exercises
pt. 5</a></li>
</ul></li>
</ul>
</div>

<p>#Day 2</p>
<pre><code>## ── Attaching core tidyverse packages ── tidyverse 2.0.0 ──
## ✔ dplyr     1.1.2     ✔ readr     2.1.4
## ✔ forcats   1.0.0     ✔ stringr   1.5.0
## ✔ ggplot2   3.4.3     ✔ tibble    3.2.1
## ✔ lubridate 1.9.2     ✔ tidyr     1.3.0
## ✔ purrr     1.0.2     
## ── Conflicts ──────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()
## ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
<div id="nonsense" class="section level1">
<h1>Nonsense</h1>
<details>
<summary>
It’s hidden
</summary>
<pre class="r"><code>mtcars %&gt;% ggplot(aes(cyl, hp)) + geom_point() + geom_smooth(method = &quot;lm&quot;) + theme_bw()</code></pre>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="Day-2_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<pre class="r"><code>diamonds %&gt;% ggplot(aes(carat, color, color = price)) + geom_point() + facet_wrap(~color, scales = &quot;free_y&quot;)</code></pre>
<p><img src="Day-2_files/figure-html/unnamed-chunk-2-2.png" width="672" /></p>
<pre class="r"><code>diamonds %&gt;% ggplot(aes(price, cut, color = color)) + geom_point()</code></pre>
<img src="Day-2_files/figure-html/unnamed-chunk-2-3.png" width="672" />
</details>
<div id="exercises-pt.-1" class="section level2">
<h2>Exercises pt. 1</h2>
<pre class="r"><code>#Original code and output

ggplot(iris, aes(Petal.Length, Petal.Width)) +
geom_point(size = 3)</code></pre>
<p><img src="Day-2_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<pre class="r"><code>#Updated code and output

p1 &lt;- ggplot(iris, aes(Petal.Length, Petal.Width, color = Species, shape = Species)) +
geom_point(size = 3) + theme_bw(base_size = 18) + labs(title = &quot;to obtain this plot&quot;)

p1</code></pre>
<p><img src="Day-2_files/figure-html/unnamed-chunk-3-2.png" width="672" /></p>
<pre class="r"><code>#Now with facets and free axes

p1 + facet_grid( . ~ Species, scales = &quot;free_x&quot;) + labs(subtitle = &quot;x-axis varies&quot;)</code></pre>
<p><img src="Day-2_files/figure-html/unnamed-chunk-3-3.png" width="672" /></p>
<pre class="r"><code>#faceted by continous variable but applied to intervals.
#using the &quot;cut&quot; function

p1 + facet_wrap(~cut(Petal.Width, breaks = c(0.5,1,1.5,2)), scales = &quot;free_y&quot;) </code></pre>
<p><img src="Day-2_files/figure-html/unnamed-chunk-3-4.png" width="672" />
# Leaving Iris</p>
<pre class="r"><code>df &lt;- dplyr::filter(gapminder::gapminder, year == 1992)

df %&gt;% ggplot(aes(gdpPercap,
                  lifeExp,
                  size = pop/1000000, #Changes the number
                  color = continent
                  )
              ) +
  geom_point()+
  theme_bw(base_size = 16) +
  labs(title = &quot;Gapminder for 1992&quot;,
       x = &quot;Gross Domestic Product (log scales)&quot;,
       y = &quot;Life expectancy at birth (years)&quot;,
       color = &quot;Continent&quot;, size = &quot;Population\n (millions)&quot;) +
  scale_x_log10()</code></pre>
<p><img src="Day-2_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
</div>
<div id="exercises-pt.-2" class="section level2">
<h2>Exercises pt. 2</h2>
<pre class="r"><code>#1 How can you tell if an object is a tibble?
is_tibble(iris)</code></pre>
<pre><code>## [1] FALSE</code></pre>
<pre class="r"><code>is.data.frame(iris)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="r"><code>#2 If you have the name of a variable stored in an object e.g. var &lt;- &quot;mpg&quot;
# How can you extract the reference variable from a tibble?

var &lt;- mpg
names(var)</code></pre>
<pre><code>##  [1] &quot;manufacturer&quot; &quot;model&quot;        &quot;displ&quot;        &quot;year&quot;         &quot;cyl&quot;         
##  [6] &quot;trans&quot;        &quot;drv&quot;          &quot;cty&quot;          &quot;hwy&quot;          &quot;fl&quot;          
## [11] &quot;class&quot;</code></pre>
<pre class="r"><code>head(var$manufacturer) # use any of the above $names the print</code></pre>
<pre><code>## [1] &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; &quot;audi&quot;</code></pre>
<pre class="r"><code># var[[&quot;manufacturer&quot;]] # does the same
# var[[1]]  more of the same

#3 What does tibble::enframe() do? when might you use it?


# It converts a vector to a tibble

short_vector &lt;- c(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;)
short_vector</code></pre>
<pre><code>## [1] &quot;one&quot;   &quot;two&quot;   &quot;three&quot; &quot;four&quot;</code></pre>
<pre class="r"><code>is_vector(short_vector)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="r"><code>small_tibble &lt;- short_vector %&gt;% enframe()
small_tibble</code></pre>
<pre><code>## # A tibble: 4 × 2
##    name value
##   &lt;int&gt; &lt;chr&gt;
## 1     1 one  
## 2     2 two  
## 3     3 three
## 4     4 four</code></pre>
<pre class="r"><code>is_tibble(small_tibble)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="r"><code>#Clean-up
rm(var,
   short_vector,
   small_tibble,
   df,
   p1)</code></pre>
</div>
<div id="exercises-pt.-3" class="section level2">
<h2>Exercises pt. 3</h2>
<p>Forked from r4ds</p>
<div id="section" class="section level3">
<h3>1.</h3>
<p>Why are pivot_longer() and pivot_wider() not perfectly symmetrical?
Carefully consider the following example:</p>
<pre class="r"><code>stocks &lt;- tibble(
  year   = c(2015, 2015, 2016, 2016),
  half  = c(   1,    2,     1,    2),
  return = c(1.88, 0.59, 0.92, 0.17)
)
stocks</code></pre>
<pre><code>## # A tibble: 4 × 3
##    year  half return
##   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
## 1  2015     1   1.88
## 2  2015     2   0.59
## 3  2016     1   0.92
## 4  2016     2   0.17</code></pre>
<pre class="r"><code>stocks %&gt;% 
  pivot_wider(names_from = year, values_from = return) %&gt;%
  pivot_longer(`2015`:`2016`, names_to = &quot;year&quot;, values_to = &quot;return&quot;)</code></pre>
<pre><code>## # A tibble: 4 × 3
##    half year  return
##   &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;
## 1     1 2015    1.88
## 2     1 2016    0.92
## 3     2 2015    0.59
## 4     2 2016    0.17</code></pre>
<pre class="r"><code># Year get&#39;s turned into a name when you pivot wider, so when you pivot longer it&#39;s using a name which will be character.

#(Hint: look at the variable types and think about column names.)

# pivot_longer() has a names_ptypes argument, e.g.  names_ptypes = list(year = double()). What does it do?


# It throws an error if the data type doesn&#39;t match what you&#39;re expecting

# stocks %&gt;% 
#   pivot_wider(names_from = year, values_from = return) %&gt;%
#   pivot_longer(`2015`:`2016`,
#                names_to = &quot;year&quot;,
#                values_to = &quot;return&quot;,
#                names_ptypes = list(year = double())
#                )</code></pre>
</div>
<div id="why-does-this-code-fail" class="section level3">
<h3>2. Why does this code fail?</h3>
<pre class="r"><code># table4a %&gt;% 
#   pivot_longer(c(1999, 2000), names_to = &quot;year&quot;, values_to = &quot;cases&quot;)

#Because it&#39;s using tidy select, the &quot;cols&quot; argument c(1999, 2000) is loooking for column number 1999 and 2000 and there are only 3. you can either correct the numbers, or specify it&#39;s the column name with &quot;&quot;

#These do the same
table4a %&gt;% 
  pivot_longer(c(2, 3), names_to = &quot;year&quot;, values_to = &quot;cases&quot;)</code></pre>
<pre><code>## # A tibble: 6 × 3
##   country     year   cases
##   &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt;
## 1 Afghanistan 1999     745
## 2 Afghanistan 2000    2666
## 3 Brazil      1999   37737
## 4 Brazil      2000   80488
## 5 China       1999  212258
## 6 China       2000  213766</code></pre>
<pre class="r"><code>table4a %&gt;% 
  pivot_longer(c(&quot;1999&quot;, &quot;2000&quot;), names_to = &quot;year&quot;, values_to = &quot;cases&quot;)</code></pre>
<pre><code>## # A tibble: 6 × 3
##   country     year   cases
##   &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt;
## 1 Afghanistan 1999     745
## 2 Afghanistan 2000    2666
## 3 Brazil      1999   37737
## 4 Brazil      2000   80488
## 5 China       1999  212258
## 6 China       2000  213766</code></pre>
</div>
<div
id="what-would-happen-if-you-widen-this-table-why-how-could-you-add-a-new-column-to-uniquely-identify-each-value"
class="section level3">
<h3>3. What would happen if you widen this table? Why? How could you add
a new column to uniquely identify each value?</h3>
<p>What would happen if you widen this table? Why? How could you add a
new column to uniquely identify each value?</p>
<pre class="r"><code>people &lt;- tribble(
  ~name,             ~names,  ~values,
  #-----------------|--------|------
  &quot;Phillip Woods&quot;,   &quot;age&quot;,       45,
  &quot;Phillip Woods&quot;,   &quot;height&quot;,   186,
  &quot;Phillip Woods&quot;,   &quot;age&quot;,       50,
  &quot;Jessica Cordero&quot;, &quot;age&quot;,       37,
  &quot;Jessica Cordero&quot;, &quot;height&quot;,   156
)
#It&#39;s a problem that Philip Woods appears with two different ages.
#There&#39;s a number of solutions depending on the reason for the above problem.</code></pre>
<p>Tidy the simple tibble below. Do you need to make it wider or longer?
What are the variables?</p>
<pre class="r"><code>preg &lt;- tribble(
  ~pregnant, ~male, ~female,
  &quot;yes&quot;,     NA,    10,
  &quot;no&quot;,      20,    12
)
#This way each column holds one type of information.
preg %&gt;% pivot_longer(c(&quot;male&quot;, &quot;female&quot;), names_to = &quot;Sex&quot;, values_to = &quot;Count&quot;)</code></pre>
<pre><code>## # A tibble: 4 × 3
##   pregnant Sex    Count
##   &lt;chr&gt;    &lt;chr&gt;  &lt;dbl&gt;
## 1 yes      male      NA
## 2 yes      female    10
## 3 no       male      20
## 4 no       female    12</code></pre>
<pre class="r"><code>#</code></pre>
</div>
</div>
</div>
<div id="nyc-flights" class="section level1">
<h1>NYC flights</h1>
<pre><code>## # A tibble: 9,723 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     1      848           1835       853     1001           1950
##  2  2013     1     1      957            733       144     1056            853
##  3  2013     1     1     1114            900       134     1447           1222
##  4  2013     1     1     1540           1338       122     2020           1825
##  5  2013     1     1     1815           1325       290     2120           1542
##  6  2013     1     1     1842           1422       260     1958           1535
##  7  2013     1     1     1856           1645       131     2212           2005
##  8  2013     1     1     1934           1725       129     2126           1855
##  9  2013     1     1     1938           1703       155     2109           1823
## 10  2013     1     1     1942           1705       157     2124           1830
## # ℹ 9,713 more rows
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<pre><code>## # A tibble: 336,776 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     9      641            900      1301     1242           1530
##  2  2013     6    15     1432           1935      1137     1607           2120
##  3  2013     1    10     1121           1635      1126     1239           1810
##  4  2013     9    20     1139           1845      1014     1457           2210
##  5  2013     7    22      845           1600      1005     1044           1815
##  6  2013     4    10     1100           1900       960     1342           2211
##  7  2013     3    17     2321            810       911      135           1020
##  8  2013     6    27      959           1900       899     1236           2226
##  9  2013     7    22     2257            759       898      121           1026
## 10  2013    12     5      756           1700       896     1058           2020
## # ℹ 336,766 more rows
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<pre><code>## # A tibble: 2,313 × 3
##    month origin dest 
##    &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;
##  1     1 EWR    IAH  
##  2     1 LGA    IAH  
##  3     1 JFK    MIA  
##  4     1 JFK    BQN  
##  5     1 LGA    ATL  
##  6     1 EWR    ORD  
##  7     1 EWR    FLL  
##  8     1 LGA    IAD  
##  9     1 JFK    MCO  
## 10     1 LGA    ORD  
## # ℹ 2,303 more rows</code></pre>
<pre><code>## # A tibble: 166 × 3
##    origin dest      n
##    &lt;chr&gt;  &lt;chr&gt; &lt;int&gt;
##  1 EWR    ALB       3
##  2 EWR    ATL       8
##  3 EWR    AUS       2
##  4 EWR    AVL       1
##  5 EWR    BDL       2
##  6 EWR    BNA       2
##  7 EWR    BOS       8
##  8 EWR    BQN       1
##  9 EWR    BTV       4
## 10 EWR    BUF       5
## # ℹ 156 more rows</code></pre>
<div id="exercises-pt.-4" class="section level2">
<h2>Exercises pt. 4</h2>
<p>1.In a single pipeline for each condition, find all flights that meet
the condition: –Had an arrival delay of two or more hours – Flew to
Houston (IAH or HOU) –Were operated by United, American, or Delta
–Departed in summer (July, August, and September) –Arrived more than two
hours late, but didn’t leave late –Were delayed by at least an hour, but
made up over 30 minutes in flight –Sort flights to find the flights with
longest departure delays. Find the flights that left earliest in the
morning.</p>
<div id="section-1" class="section level3">
<h3>1.</h3>
<pre class="r"><code>airlines</code></pre>
<pre><code>## # A tibble: 16 × 2
##    carrier name                       
##    &lt;chr&gt;   &lt;chr&gt;                      
##  1 9E      Endeavor Air Inc.          
##  2 AA      American Airlines Inc.     
##  3 AS      Alaska Airlines Inc.       
##  4 B6      JetBlue Airways            
##  5 DL      Delta Air Lines Inc.       
##  6 EV      ExpressJet Airlines Inc.   
##  7 F9      Frontier Airlines Inc.     
##  8 FL      AirTran Airways Corporation
##  9 HA      Hawaiian Airlines Inc.     
## 10 MQ      Envoy Air                  
## 11 OO      SkyWest Airlines Inc.      
## 12 UA      United Air Lines Inc.      
## 13 US      US Airways Inc.            
## 14 VX      Virgin America             
## 15 WN      Southwest Airlines Co.     
## 16 YV      Mesa Airlines Inc.</code></pre>
<pre class="r"><code>names(flights)</code></pre>
<pre><code>##  [1] &quot;year&quot;           &quot;month&quot;          &quot;day&quot;            &quot;dep_time&quot;      
##  [5] &quot;sched_dep_time&quot; &quot;dep_delay&quot;      &quot;arr_time&quot;       &quot;sched_arr_time&quot;
##  [9] &quot;arr_delay&quot;      &quot;carrier&quot;        &quot;flight&quot;         &quot;tailnum&quot;       
## [13] &quot;origin&quot;         &quot;dest&quot;           &quot;air_time&quot;       &quot;distance&quot;      
## [17] &quot;hour&quot;           &quot;minute&quot;         &quot;time_hour&quot;</code></pre>
<pre class="r"><code># whoops
# flights %&gt;% filter(arr_delay &gt; 120 &amp; 
#                    dest == &quot;IAH&quot; | dest == &quot;HOU&quot; &amp;
#                    carrier  %in% c(&quot;United&quot;,&quot;American&quot;,&quot;Delta&quot;) &amp;
#                    month %in% c(7,8,9) &amp;
#                    dep_delay &lt;= 0 &amp;
#                    
#                    )
                    
# –Had an arrival delay of two or more hours
flights %&gt;% filter(arr_delay &gt; 120)</code></pre>
<pre><code>## # A tibble: 10,034 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     1      811            630       101     1047            830
##  2  2013     1     1      848           1835       853     1001           1950
##  3  2013     1     1      957            733       144     1056            853
##  4  2013     1     1     1114            900       134     1447           1222
##  5  2013     1     1     1505           1310       115     1638           1431
##  6  2013     1     1     1525           1340       105     1831           1626
##  7  2013     1     1     1549           1445        64     1912           1656
##  8  2013     1     1     1558           1359       119     1718           1515
##  9  2013     1     1     1732           1630        62     2028           1825
## 10  2013     1     1     1803           1620       103     2008           1750
## # ℹ 10,024 more rows
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<pre class="r"><code># – Flew to Houston (IAH or HOU)
flights %&gt;% filter(dest == &quot;IAH&quot; | dest == &quot;HOU&quot;)</code></pre>
<pre><code>## # A tibble: 9,313 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     1      517            515         2      830            819
##  2  2013     1     1      533            529         4      850            830
##  3  2013     1     1      623            627        -4      933            932
##  4  2013     1     1      728            732        -4     1041           1038
##  5  2013     1     1      739            739         0     1104           1038
##  6  2013     1     1      908            908         0     1228           1219
##  7  2013     1     1     1028           1026         2     1350           1339
##  8  2013     1     1     1044           1045        -1     1352           1351
##  9  2013     1     1     1114            900       134     1447           1222
## 10  2013     1     1     1205           1200         5     1503           1505
## # ℹ 9,303 more rows
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<pre class="r"><code># –Were operated by United, American, or Delta
#Getting the abbr. for airline carriers
flights %&gt;% distinct(carrier)</code></pre>
<pre><code>## # A tibble: 16 × 1
##    carrier
##    &lt;chr&gt;  
##  1 UA     
##  2 AA     
##  3 B6     
##  4 DL     
##  5 EV     
##  6 MQ     
##  7 US     
##  8 WN     
##  9 VX     
## 10 FL     
## 11 AS     
## 12 9E     
## 13 F9     
## 14 HA     
## 15 YV     
## 16 OO</code></pre>
<pre class="r"><code>flights %&gt;% filter(carrier %in% c(&quot;UA&quot;, &quot;AA&quot;, &quot;DL&quot;))</code></pre>
<pre><code>## # A tibble: 139,504 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     1      517            515         2      830            819
##  2  2013     1     1      533            529         4      850            830
##  3  2013     1     1      542            540         2      923            850
##  4  2013     1     1      554            600        -6      812            837
##  5  2013     1     1      554            558        -4      740            728
##  6  2013     1     1      558            600        -2      753            745
##  7  2013     1     1      558            600        -2      924            917
##  8  2013     1     1      558            600        -2      923            937
##  9  2013     1     1      559            600        -1      941            910
## 10  2013     1     1      559            600        -1      854            902
## # ℹ 139,494 more rows
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<pre class="r"><code># –Departed in summer (July, August, and September)
flights %&gt;% filter(month %in% 7:9)</code></pre>
<pre><code>## # A tibble: 86,326 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     7     1        1           2029       212      236           2359
##  2  2013     7     1        2           2359         3      344            344
##  3  2013     7     1       29           2245       104      151              1
##  4  2013     7     1       43           2130       193      322             14
##  5  2013     7     1       44           2150       174      300            100
##  6  2013     7     1       46           2051       235      304           2358
##  7  2013     7     1       48           2001       287      308           2305
##  8  2013     7     1       58           2155       183      335             43
##  9  2013     7     1      100           2146       194      327             30
## 10  2013     7     1      100           2245       135      337            135
## # ℹ 86,316 more rows
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<pre class="r"><code># –Arrived more than two hours late, but didn’t leave late
flights %&gt;% filter(arr_delay &gt; 120 &amp; dep_delay &lt;= 0)</code></pre>
<pre><code>## # A tibble: 29 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1    27     1419           1420        -1     1754           1550
##  2  2013    10     7     1350           1350         0     1736           1526
##  3  2013    10     7     1357           1359        -2     1858           1654
##  4  2013    10    16      657            700        -3     1258           1056
##  5  2013    11     1      658            700        -2     1329           1015
##  6  2013     3    18     1844           1847        -3       39           2219
##  7  2013     4    17     1635           1640        -5     2049           1845
##  8  2013     4    18      558            600        -2     1149            850
##  9  2013     4    18      655            700        -5     1213            950
## 10  2013     5    22     1827           1830        -3     2217           2010
## # ℹ 19 more rows
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<pre class="r"><code># –Were delayed by at least an hour, but made up over 30 minutes in flight
flights %&gt;% filter(dep_delay &gt;= 60 &amp; ((dep_delay-arr_delay) &gt; 30))</code></pre>
<pre><code>## # A tibble: 1,844 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     1     2205           1720       285       46           2040
##  2  2013     1     1     2326           2130       116      131             18
##  3  2013     1     3     1503           1221       162     1803           1555
##  4  2013     1     3     1839           1700        99     2056           1950
##  5  2013     1     3     1850           1745        65     2148           2120
##  6  2013     1     3     1941           1759       102     2246           2139
##  7  2013     1     3     1950           1845        65     2228           2227
##  8  2013     1     3     2015           1915        60     2135           2111
##  9  2013     1     3     2257           2000       177       45           2224
## 10  2013     1     4     1917           1700       137     2135           1950
## # ℹ 1,834 more rows
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<pre class="r"><code># –Sort flights to find the flights with longest departure delays. 
flights %&gt;% arrange(desc(dep_delay))</code></pre>
<pre><code>## # A tibble: 336,776 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     9      641            900      1301     1242           1530
##  2  2013     6    15     1432           1935      1137     1607           2120
##  3  2013     1    10     1121           1635      1126     1239           1810
##  4  2013     9    20     1139           1845      1014     1457           2210
##  5  2013     7    22      845           1600      1005     1044           1815
##  6  2013     4    10     1100           1900       960     1342           2211
##  7  2013     3    17     2321            810       911      135           1020
##  8  2013     6    27      959           1900       899     1236           2226
##  9  2013     7    22     2257            759       898      121           1026
## 10  2013    12     5      756           1700       896     1058           2020
## # ℹ 336,766 more rows
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<pre class="r"><code># Find the flights that left earliest in the morning.
flights %&gt;% arrange(dep_time)</code></pre>
<pre><code>## # A tibble: 336,776 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1    13        1           2249        72      108           2357
##  2  2013     1    31        1           2100       181      124           2225
##  3  2013    11    13        1           2359         2      442            440
##  4  2013    12    16        1           2359         2      447            437
##  5  2013    12    20        1           2359         2      430            440
##  6  2013    12    26        1           2359         2      437            440
##  7  2013    12    30        1           2359         2      441            437
##  8  2013     2    11        1           2100       181      111           2225
##  9  2013     2    24        1           2245        76      121           2354
## 10  2013     3     8        1           2355         6      431            440
## # ℹ 336,766 more rows
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
<div
id="sort-flights-to-find-the-fastest-flights.-hint-try-including-a-math-calculation-inside-of-your-function."
class="section level3">
<h3>2.Sort flights to find the fastest flights. (Hint: Try including a
math calculation inside of your function.)</h3>
<pre class="r"><code>names(flights
      )</code></pre>
<pre><code>##  [1] &quot;year&quot;           &quot;month&quot;          &quot;day&quot;            &quot;dep_time&quot;      
##  [5] &quot;sched_dep_time&quot; &quot;dep_delay&quot;      &quot;arr_time&quot;       &quot;sched_arr_time&quot;
##  [9] &quot;arr_delay&quot;      &quot;carrier&quot;        &quot;flight&quot;         &quot;tailnum&quot;       
## [13] &quot;origin&quot;         &quot;dest&quot;           &quot;air_time&quot;       &quot;distance&quot;      
## [17] &quot;hour&quot;           &quot;minute&quot;         &quot;time_hour&quot;</code></pre>
<pre class="r"><code>flights %&gt;% arrange(desc(distance/air_time)) %&gt;%
  select(distance, air_time) %&gt;% 
  #Fluff
  mutate(speed_mph = distance / air_time * 60)</code></pre>
<pre><code>## # A tibble: 336,776 × 3
##    distance air_time speed_mph
##       &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
##  1      762       65      703.
##  2     1008       93      650.
##  3      594       55      648 
##  4      748       70      641.
##  5     1035      105      591.
##  6     1598      170      564 
##  7     1598      172      557.
##  8     1623      175      556.
##  9     1598      173      554.
## 10     1598      173      554.
## # ℹ 336,766 more rows</code></pre>
</div>
<div id="was-there-a-flight-on-every-day-of-2013"
class="section level3">
<h3>3.Was there a flight on every day of 2013?</h3>
<pre class="r"><code># removing cancelled flights, and checking distinct days and month combinations still appearing.

flights %&gt;% filter(!is.na(dep_time)) %&gt;% distinct(month, day)</code></pre>
<pre><code>## # A tibble: 365 × 2
##    month   day
##    &lt;int&gt; &lt;int&gt;
##  1     1     1
##  2     1     2
##  3     1     3
##  4     1     4
##  5     1     5
##  6     1     6
##  7     1     7
##  8     1     8
##  9     1     9
## 10     1    10
## # ℹ 355 more rows</code></pre>
<pre class="r"><code>#Yes there are 365 distinct combinations.</code></pre>
<p>###4.Which flights traveled the farthest distance? Which traveled the
least distance?</p>
<pre class="r"><code>#Unique origin/destination combination == max distance
flights %&gt;% filter(distance == max(flights$distance)) %&gt;% distinct(origin, dest, .keep_all = TRUE)</code></pre>
<pre><code>## # A tibble: 1 × 19
##    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
## 1  2013     1     1      857            900        -3     1516           1530
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<pre class="r"><code>#same but for min
flights %&gt;% filter(distance == min(flights$distance)) %&gt;% distinct(origin, dest, .keep_all = TRUE)</code></pre>
<pre><code>## # A tibble: 1 × 19
##    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
## 1  2013     7    27       NA            106        NA       NA            245
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<pre class="r"><code># It&#39;s the only flight
flights %&gt;% filter(origin == &quot;EWR&quot; &amp; dest == &quot;LGA&quot;)</code></pre>
<pre><code>## # A tibble: 1 × 19
##    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
## 1  2013     7    27       NA            106        NA       NA            245
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<pre class="r"><code># They&#39;re very close (obviously)
airports %&gt;% filter(faa == &quot;LGA&quot; | faa == &quot;EWR&quot;)</code></pre>
<pre><code>## # A tibble: 2 × 8
##   faa   name                  lat   lon   alt    tz dst   tzone           
##   &lt;chr&gt; &lt;chr&gt;               &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;           
## 1 EWR   Newark Liberty Intl  40.7 -74.2    18    -5 A     America/New_York
## 2 LGA   La Guardia           40.8 -73.9    22    -5 A     America/New_York</code></pre>
<p>###5.Does it matter what order you used filter() and arrange() if
you’re using both? Why/why not? Think about the results and how much
work the functions would have to do.</p>
<pre class="r"><code>#If you filter first you reduced the data size of the data first, and then arrange it.

#If you arrange first and then filter, you&#39;re working on the full data set for both operations</code></pre>
</div>
</div>
<div id="exercises-pt.-5" class="section level2">
<h2>Exercises pt. 5</h2>
<div
id="compare-dep_time-sched_dep_time-and-dep_delay.-how-would-you-expect-those-three-numbers-to-be-related"
class="section level3">
<h3>1.Compare dep_time, sched_dep_time, and dep_delay. How would you
expect those three numbers to be related?</h3>
<pre class="r"><code>flights %&gt;% select(dep_time, sched_dep_time, dep_delay)</code></pre>
<pre><code>## # A tibble: 336,776 × 3
##    dep_time sched_dep_time dep_delay
##       &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;
##  1      517            515         2
##  2      533            529         4
##  3      542            540         2
##  4      544            545        -1
##  5      554            600        -6
##  6      554            558        -4
##  7      555            600        -5
##  8      557            600        -3
##  9      557            600        -3
## 10      558            600        -2
## # ℹ 336,766 more rows</code></pre>
<pre class="r"><code># actual departure time - schedule = delay
# conversion is complicated

flights %&gt;% separate(dep_time, into = c(&quot;dep_time_hour&quot;, &quot;dep_time_min&quot;), remove = FALSE, sep = -2)</code></pre>
<pre><code>## # A tibble: 336,776 × 21
##     year month   day dep_time dep_time_hour dep_time_min sched_dep_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt; &lt;chr&gt;         &lt;chr&gt;                 &lt;int&gt;
##  1  2013     1     1      517 5             17                      515
##  2  2013     1     1      533 5             33                      529
##  3  2013     1     1      542 5             42                      540
##  4  2013     1     1      544 5             44                      545
##  5  2013     1     1      554 5             54                      600
##  6  2013     1     1      554 5             54                      558
##  7  2013     1     1      555 5             55                      600
##  8  2013     1     1      557 5             57                      600
##  9  2013     1     1      557 5             57                      600
## 10  2013     1     1      558 5             58                      600
## # ℹ 336,766 more rows
## # ℹ 14 more variables: dep_delay &lt;dbl&gt;, arr_time &lt;int&gt;, sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;,
## #   dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;,
## #   time_hour &lt;dttm&gt;</code></pre>
</div>
<div
id="brainstorm-as-many-ways-as-possible-to-select-dep_time-dep_delay-arr_time-and-arr_delay-from-flights."
class="section level3">
<h3>2.Brainstorm as many ways as possible to select dep_time, dep_delay,
arr_time, and arr_delay from flights.</h3>
<pre class="r"><code>flights %&gt;% select(dep_time, dep_delay, arr_time, arr_delay)</code></pre>
<pre><code>## # A tibble: 336,776 × 4
##    dep_time dep_delay arr_time arr_delay
##       &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
##  1      517         2      830        11
##  2      533         4      850        20
##  3      542         2      923        33
##  4      544        -1     1004       -18
##  5      554        -6      812       -25
##  6      554        -4      740        12
##  7      555        -5      913        19
##  8      557        -3      709       -14
##  9      557        -3      838        -8
## 10      558        -2      753         8
## # ℹ 336,766 more rows</code></pre>
<pre class="r"><code>flights %&gt;% select(matches(&quot;^dep&quot;), matches(&quot;^arr&quot;))</code></pre>
<pre><code>## # A tibble: 336,776 × 4
##    dep_time dep_delay arr_time arr_delay
##       &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
##  1      517         2      830        11
##  2      533         4      850        20
##  3      542         2      923        33
##  4      544        -1     1004       -18
##  5      554        -6      812       -25
##  6      554        -4      740        12
##  7      555        -5      913        19
##  8      557        -3      709       -14
##  9      557        -3      838        -8
## 10      558        -2      753         8
## # ℹ 336,766 more rows</code></pre>
<pre class="r"><code>vector &lt;- c(&quot;dep_time&quot;, &quot;dep_delay&quot;, &quot;arr_time&quot;, &quot;arr_delay&quot;)
flights %&gt;% select( all_of(vector))</code></pre>
<pre><code>## # A tibble: 336,776 × 4
##    dep_time dep_delay arr_time arr_delay
##       &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
##  1      517         2      830        11
##  2      533         4      850        20
##  3      542         2      923        33
##  4      544        -1     1004       -18
##  5      554        -6      812       -25
##  6      554        -4      740        12
##  7      555        -5      913        19
##  8      557        -3      709       -14
##  9      557        -3      838        -8
## 10      558        -2      753         8
## # ℹ 336,766 more rows</code></pre>
</div>
<div
id="what-happens-if-you-specify-the-name-of-the-same-variable-multiple-times-in-a-select-call"
class="section level3">
<h3>3.What happens if you specify the name of the same variable multiple
times in a select() call?</h3>
<pre class="r"><code>flights %&gt;% select(year,month, year)</code></pre>
<pre><code>## # A tibble: 336,776 × 2
##     year month
##    &lt;int&gt; &lt;int&gt;
##  1  2013     1
##  2  2013     1
##  3  2013     1
##  4  2013     1
##  5  2013     1
##  6  2013     1
##  7  2013     1
##  8  2013     1
##  9  2013     1
## 10  2013     1
## # ℹ 336,766 more rows</code></pre>
<pre class="r"><code>#Duplicates are ignored</code></pre>
</div>
<div id="does-the-result-of-running-the-following-code-surprise-you"
class="section level3">
<h3>4.Does the result of running the following code surprise you?</h3>
<p>How do the select helpers deal with upper and lower case by default?
How can you change that default?</p>
<pre class="r"><code>flights %&gt;% select(contains(&quot;TIME&quot;))</code></pre>
<pre><code>## # A tibble: 336,776 × 6
##    dep_time sched_dep_time arr_time sched_arr_time air_time time_hour          
##       &lt;int&gt;          &lt;int&gt;    &lt;int&gt;          &lt;int&gt;    &lt;dbl&gt; &lt;dttm&gt;             
##  1      517            515      830            819      227 2013-01-01 05:00:00
##  2      533            529      850            830      227 2013-01-01 05:00:00
##  3      542            540      923            850      160 2013-01-01 05:00:00
##  4      544            545     1004           1022      183 2013-01-01 05:00:00
##  5      554            600      812            837      116 2013-01-01 06:00:00
##  6      554            558      740            728      150 2013-01-01 05:00:00
##  7      555            600      913            854      158 2013-01-01 06:00:00
##  8      557            600      709            723       53 2013-01-01 06:00:00
##  9      557            600      838            846      140 2013-01-01 06:00:00
## 10      558            600      753            745      138 2013-01-01 06:00:00
## # ℹ 336,766 more rows</code></pre>
<pre class="r"><code>flights %&gt;% select(contains(&quot;TIME&quot;, ignore.case = FALSE))</code></pre>
<pre><code>## # A tibble: 336,776 × 0</code></pre>
<pre class="r"><code>flights %&gt;% select(matches(&quot;TIME&quot;))</code></pre>
<pre><code>## # A tibble: 336,776 × 6
##    dep_time sched_dep_time arr_time sched_arr_time air_time time_hour          
##       &lt;int&gt;          &lt;int&gt;    &lt;int&gt;          &lt;int&gt;    &lt;dbl&gt; &lt;dttm&gt;             
##  1      517            515      830            819      227 2013-01-01 05:00:00
##  2      533            529      850            830      227 2013-01-01 05:00:00
##  3      542            540      923            850      160 2013-01-01 05:00:00
##  4      544            545     1004           1022      183 2013-01-01 05:00:00
##  5      554            600      812            837      116 2013-01-01 06:00:00
##  6      554            558      740            728      150 2013-01-01 05:00:00
##  7      555            600      913            854      158 2013-01-01 06:00:00
##  8      557            600      709            723       53 2013-01-01 06:00:00
##  9      557            600      838            846      140 2013-01-01 06:00:00
## 10      558            600      753            745      138 2013-01-01 06:00:00
## # ℹ 336,766 more rows</code></pre>
<pre class="r"><code>flights %&gt;% select(matches(&quot;TIME&quot;, ignore.case = FALSE))</code></pre>
<pre><code>## # A tibble: 336,776 × 0</code></pre>
<pre class="r"><code>#Defaulst is ignore.case = TRUE</code></pre>
</div>
<div
id="rename-air_time-to-air_time_min-to-indicate-units-of-measurement-and-move-it-to-the-beginning-of-the-data-frame."
class="section level3">
<h3>5.Rename air_time to air_time_min to indicate units of measurement
and move it to the beginning of the data frame.</h3>
<pre class="r"><code>flights2 &lt;- flights %&gt;% select(air_time_min = air_time, everything())
flights2</code></pre>
<pre><code>## # A tibble: 336,776 × 19
##    air_time_min  year month   day dep_time sched_dep_time dep_delay arr_time
##           &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1          227  2013     1     1      517            515         2      830
##  2          227  2013     1     1      533            529         4      850
##  3          160  2013     1     1      542            540         2      923
##  4          183  2013     1     1      544            545        -1     1004
##  5          116  2013     1     1      554            600        -6      812
##  6          150  2013     1     1      554            558        -4      740
##  7          158  2013     1     1      555            600        -5      913
##  8           53  2013     1     1      557            600        -3      709
##  9          140  2013     1     1      557            600        -3      838
## 10          138  2013     1     1      558            600        -2      753
## # ℹ 336,766 more rows
## # ℹ 11 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;,
## #   flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
<div id="why-doesnt-the-following-work-and-what-does-the-error-mean"
class="section level3">
<h3>6.Why doesn’t the following work, and what does the error mean?</h3>
<p>flights %&gt;% select(tailnum) %&gt;% arrange(arr_delay)</p>
<pre class="r"><code># flights %&gt;%
# select(tailnum) %&gt;%
# arrange(arr_delay)

#When you run
#  flights %&gt;% select(tailnum)
#you end up with only the tailnum variable, hence it&#39;s no longer possible to arrange by the arr_delay variable.</code></pre>
</div>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
